plugins {
	id "groovy"
	id "maven-publish"
	id "jacoco"
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.apache.groovy:groovy:4.0.21'
    implementation 'org.apache.groovy:groovy-json:4.0.21'
    implementation 'org.apache.groovy:groovy-nio:4.0.21'
    implementation 'com.konghq:unirest-java:3.14.5'
    implementation 'commons-codec:commons-codec:1.17.0'
    implementation 'org.tukaani:xz:1.9'
    implementation 'commons-io:commons-io:2.16.1'
    implementation 'commons-logging:commons-logging:1.3.2'

    testImplementation 'junit:junit:4.13.1'
    testImplementation "org.assertj:assertj-core:3.0.0"
}

tasks.withType(GroovyCompile) {
    groovyOptions.optimizationOptions.indy = true
}

task sourcesJar(type: Jar) {
    dependsOn classes
    archiveClassifier.set('sources')
	from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn:javadoc) {
    archiveClassifier.set('javadoc')
    from javadoc.destinationDir
}

artifacts {
	archives sourcesJar
	archives javadocJar
}

publishing {
	publications {
		main(MavenPublication) {
			from components.java

			artifact sourcesJar
			artifact javadocJar
		}
	}
}